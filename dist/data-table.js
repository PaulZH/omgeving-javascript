(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{363:function(t,e,n){"use strict";n.r(e);var a=n(463),o=n(401);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n(451);var s=n(364),r=n(453),l=n.n(r),c=n(471),u=Object(s.a)(o.default,a.a,a.b,!1,null,null,null);l()(u,{VIcon:c.a}),u.options.__file="src/vue/ld-data-table.vue",e.default=u.exports},401:function(t,e,n){"use strict";n.r(e);var a=n(402),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e.default=o.a},402:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,o=n(450),i=(a=o)&&a.__esModule?a:{default:a};e.default={mixins:[i.default],props:["query","countQuery","resource","searchFields"],data:function(){return{offset:null,prevOffset:null,nextOffset:null,rowCount:null,page:1,pageSize:10,pageCount:0,sortField:null,sortDirection:"ASC",queryTemplate:"",countQueryTemplate:"",search:"",fields:[],rows:[]}},watch:{queryTemplate:function(t){t&&(this.offset=0)},offset:function(t){null!==t&&this.fetchRows(),0===t&&this.countRows(),this.calculateOffsets()},rowCount:function(t){this.pageCount=Math.ceil(t/this.pageSize),this.calculateOffsets()},rows:function(t){this.$nextTick(this.calculateOffsets)},sortField:function(){this.fetchRows()},sortDirection:function(){this.fetchRows()},search:_.debounce(function(t){this.offset=0,this.rowCount=0,this.pageCount=0,this.fetchRows(),this.countRows()},500)},mounted:function(){this.fetchQueryTemplate(),this.fetchCountQueryTemplate()},methods:{fetchQueryTemplate:function(){var t=this;this.$http.get(this.query).then(function(e){t.queryTemplate=e.body})},fetchCountQueryTemplate:function(){var t=this;this.$http.get(this.countQuery).then(function(e){t.countQueryTemplate=e.body})},fetchRows:function(){var t=this,e=this.queryTemplate.replace(/%resource%/g,this.resource).replace(/(}[^}]*)$/," "+this.getFilters()+"$1")+(this.sortField?" ORDER BY "+this.sortDirection+"(?"+this.sortField+")":"")+" LIMIT "+this.pageSize+" OFFSET "+this.offset;this.runQuery(e,function(e){t.fields=e.vars.map(function(t){return{name:t,label:t}}),t.rows=e.rows})},countRows:function(){var t=this;if(!this.countQueryTemplate)return setTimeout(this.countRows,500);var e=this.countQueryTemplate.replace(/%resource%/g,this.resource).replace(/(}[^}]*)$/," "+this.getFilters()+"$1");this.runQuery(e,function(e){t.rowCount=parseInt(e.rows[0].count.value)})},calculateOffsets:function(){this.rowCount?(this.prevOffset=Math.max(0,this.offset-this.pageSize),this.nextOffset=this.offset+this.pageSize,this.nextOffset>this.rowCount-1&&(this.nextOffset=this.offset),this.page=1+Math.ceil(this.offset/this.pageSize)):(this.prevOffset=this.nextOffset=null,this.page=0)},onSubmit:function(t){t.preventDefault()},sort:function(t){t.name===this.sortField?this.sortDirection="ASC"===this.sortDirection?"DESC":"ASC":(this.sortField=t.name,this.sortDirection="ASC")},getFilters:function(){if(!this.search.trim().length||!this.searchFields.trim().length)return"";var t=this.searchFields.split(/\s+/);return"FILTER("+this.search.split(/\s+/).filter(function(t){return!t.match(/^\s*$/)}).map(function(e){return"("+t.map(function(t){return(e=e.replace(/["';<>]/,"")).length?"regex("+t+', "'+e.replace(/["';<>]/,"")+'", "i")':""}).join(" || ")+")"}).join(" ) && ( ")+")"}}}},403:function(t,e,n){var a=n(452);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(131).default)("0b389dc9",a,!1,{})},450:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{endpoint:String},data:function(){return{loading:0,requests:{},queryCache:{}}},methods:{runQuery:function(t,e){var n=this;if(this.queryCache[t])return e(this.queryCache[t]);this.loading++;var a=t;this.$http.post(this.endpoint,{query:t},{credentials:!0,emulateJSON:!0,before:function(t){this.requests[a]&&this.requests[a].abort(),this.requests[a]=t}}).then(function(o){n.loading--,n.requests[a]=null,n.queryCache[t]={vars:o.body.head.vars,rows:o.body.results.bindings},e(n.queryCache[t])},function(t){n.loading--,console.log("Error, possibly just aborted",t)})},getFieldLabel:function(t,e){return e["_"+t+"Label"]?e["_"+t+"Label"].value:e[t].value.replace(/^.*[\/#]([^\/#]+)$/,"$1")}}}},451:function(t,e,n){"use strict";var a=n(403);n.n(a).a},452:function(t,e,n){(t.exports=n(130)(!1)).push([t.i,'.ld-data-table {\n  transition: opacity 0.5s;\n}\n.ld-data-table .ld-card {\n    min-height: 400px;\n}\n.ld-data-table.loading td, .ld-data-table.loading .controls {\n    opacity: 0.8;\n}\n.ld-data-table table {\n    width: 100%;\n    max-width: 100%;\n    font-size: 16px;\n    background-color: #fff;\n    border-collapse: collapse;\n    border-spacing: 0;\n    margin: 0;\n    position: relative;\n    overflow: auto;\n}\n.ld-data-table table thead {\n      vertical-align: middle;\n}\n.ld-data-table table thead th {\n        vertical-align: bottom;\n        margin: 0;\n        text-align: left;\n        padding: 0 16px;\n        font-family: "Lato Light", "Lucida Sans Unicode", "Lucida Grande", sans-serif;\n        color: #666;\n        font-size: 16px;\n        line-height: 40px;\n        border-bottom: 2px solid #4da692;\n        cursor: pointer;\n}\n.ld-data-table table thead th .sort-arrow {\n          font-size: 18px;\n}\n.ld-data-table table thead th .sort-arrow.desc {\n            transform: rotate(-180deg);\n}\n.ld-data-table table thead th.row-index {\n          text-align: right;\n}\n.ld-data-table table tbody td {\n      text-align: left;\n      padding: 8px 16px;\n      border-bottom: 1px solid #f5f5f5;\n      background-color: #fff;\n      line-height: 20px;\n      vertical-align: top;\n      color: #5e5e5e;\n}\n.ld-data-table table tbody td.row-index {\n        text-align: right;\n}\n.ld-data-table table tbody tr:nth-child(even) td {\n      background-color: #f9f9f9;\n}\n.ld-data-table .controls {\n    padding: 16px 16px 0;\n}\n.ld-data-table .controls input {\n      width: 100%;\n      padding: 8px 10px;\n      font-size: 14px;\n      line-height: 18px;\n      border: 1px solid #cbd2da;\n      vertical-align: top;\n      margin-bottom: 5px;\n}\n.ld-data-table .controls input:focus {\n        border: 1px solid #42796d;\n}\n.ld-data-table .controls .pagination {\n      text-align: right;\n}\n.ld-data-table .controls .pagination .info {\n        vertical-align: middle;\n        display: inline-block;\n        line-height: 36px;\n        font-size: 16px;\n        padding: 0 16px;\n}\n.ld-data-table .controls button {\n      display: inline-block;\n      margin-right: 7px;\n      text-align: center;\n      vertical-align: middle;\n      cursor: pointer;\n      padding: 0 12px;\n      line-height: 36px;\n      background-color: #4da692;\n      border: none;\n}\n.ld-data-table .controls button.disabled {\n        cursor: default;\n        background-color: #f5f5f5;\n}\n.ld-data-table .controls button.disabled:hover, .ld-data-table .controls button.disabled:focus, .ld-data-table .controls button.disabled::-moz-focus-inner {\n          cursor: default;\n          background-color: #f5f5f5;\n}\n.ld-data-table .controls button:hover, .ld-data-table .controls button:focus, .ld-data-table .controls button::-moz-focus-inner {\n        background-color: #42796d;\n        outline: 0;\n        border: 0;\n}\n.ld-data-table .controls button .v-icon {\n        height: 36px;\n        line-height: 36px;\n        color: #fff;\n        vertical-align: middle;\n}\n',""])},463:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ld-data-table",class:{loading:t.loading}},[n("ld-card",[n("table",[n("thead",[n("tr",[n("th",{staticClass:"row-index"},[t._v("#")]),t._v(" "),t._l(t.fields,function(e){return e.name.match(/^_/)?t._e():n("th",{on:{click:function(n){return t.sort(e)}}},[t._v("\n                        "+t._s(e.label)+"\n                        "),t.sortField===e.name?n("v-icon",{staticClass:"sort-arrow",class:{desc:"DESC"===t.sortDirection}},[t._v("arrow_upward")]):t._e()],1)})],2)]),t._v(" "),n("tbody",t._l(t.rows,function(e,a){return n("tr",[n("td",{staticClass:"row-index"},[t._v(t._s(a+t.offset+1))]),t._v(" "),t._l(t.fields,function(a){return a.name.match(/^_/)?t._e():n("td",[e[a.name]?"uri"===e[a.name].type?n("a",{attrs:{href:e[a.name].value}},[t._v("\n                            "+t._s(t.getFieldLabel(a.name,e))+"\n                        ")]):n("span",[t._v(t._s(e[a.name].value))]):n("span",[t._v("-")])])})],2)}),0)]),t._v(" "),n("div",{staticClass:"loader",class:{loading:t.loading}}),t._v(" "),n("div",{staticClass:"controls"},[n("flex-container",[n("flex-item",{staticClass:"search",attrs:{dsk:"50",tab:"100"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Filteren ..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),n("flex-item",{staticClass:"pagination",attrs:{dsk:"50",tab:"100"}},[t.pageCount?n("span",{staticClass:"info"},[t._v("\n                        Pagina "+t._s(t.page)+"/"+t._s(t.pageCount)+" ("+t._s(t.rowCount.toLocaleString())+" treffers)\n                    ")]):t._e(),t._v(" "),null!==t.prevOffset?n("button",{class:{disabled:t.offset===t.prevOffset},attrs:{title:t.prevOffset},on:{click:function(e){t.offset=t.prevOffset}}},[n("v-icon",[t._v("chevron_left")])],1):t._e(),t._v(" "),null!==t.nextOffset?n("button",{class:{disabled:t.offset===t.nextOffset},attrs:{title:t.nextOffset},on:{click:function(e){t.offset=t.nextOffset}}},[n("v-icon",[t._v("chevron_right")])],1):t._e()])],1)],1)])],1)},o=[];a._withStripped=!0,n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})}}]);