(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{368:function(t,n,e){"use strict";e.r(n);var a=e(672),o=e(516);for(var r in o)"default"!==r&&function(t){e.d(n,t,function(){return o[t]})}(r);e(650);var i=e(384),s=e(488),l=e.n(s),d=e(684),u=Object(i.a)(o.default,a.a,a.b,!1,null,null,null);l()(u,{VIcon:d.a}),u.options.__file="src/vue/ld-data-table.vue",n.default=u.exports},500:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={props:{endpoint:String,graph:String},data:function(){return{loading:0,requests:{},queryCache:{},offset:null,loadedOffset:null,rows:[],rowCount:null,pageSize:10,sortField:null,sortDirection:"ASC",queryTemplate:"",countQueryTemplate:"",search:"",fields:[]}},computed:{from:function(){return this.graph?"FROM <"+this.graph+">":""},filters:function(){if(!this.search.trim().length||!this.searchFields.trim().length)return"";var t=this.searchFields.split(/[,\s]+/),n=this.search.split(/[\s]+/).filter(function(t){return!t.match(/^\s*$/)}).map(function(n){return"("+t.map(function(t){return(n=n.replace(/["';<>]/,"")).length?"regex(str(?"+t+'), "'+n.replace(/["';<>]/,"")+'", "i")':""}).join(" || ")+")"});return"FILTER("+n.join(" ) && ( ")+")"},page:function(){return 1+Math.ceil(this.offset/this.pageSize)},pageCount:function(){return Math.ceil(this.rowCount/this.pageSize)},prevOffset:function(){return this.rowCount?Math.max(0,this.offset-this.pageSize):null},nextOffset:function(){if(!this.rowCount)return null;var t=this.offset+this.pageSize;return t>this.rowCount-1&&(t=this.offset),t}},watch:{rows:function(t){t&&this.countRows()},offset:_.debounce(function(t){null!==t&&this.fetchRows()},500),sortField:function(){this.offset=0,this.fetchRows()},sortDirection:function(){this.offset=0,this.fetchRows()},search:_.debounce(function(t){this.offset=this.rowCount=0,this.fetchRows()},500)},methods:{renderQueryTemplate:function(t){var n=void 0;do{n=!0;var e=t.match(/(%([^%]+)%)/);if(e){var a=e[1],o=e[2];if(void 0===this[o]||null===this[o]){t=null,console.log("undefined query template placeholder",o);break}n=!1,t=t.replace(a,this[o])}}while(!n);return t},fetchRows:function(){var t=this,n=this.renderQueryTemplate(this.queryTemplate||"");if(!n)return setTimeout(this.fetchRows,500);this.loading++,this.runQuery(n,function(n){t.fields=n.vars.map(function(t){return{name:t,label:t}}),t.rows=n.rows,t.loadedOffset=t.offset,setTimeout(function(){return t.loading--},250)})},countRows:function(){var t=this,n=this.renderQueryTemplate(this.countQueryTemplate||"");if(!n)return setTimeout(this.countRows,500);this.runQuery(n,function(n){t.rowCount=n.rows.length?parseInt(n.rows[0].rowCount.value):null})},runQuery:function(t,n){var e=this;if(this.queryCache[t])return n(this.queryCache[t]);var a=t;this.$http.post(this.endpoint,{query:t},{credentials:!0,emulateJSON:!0,headers:{Accept:"application/sparql-results+json, application/json, */*"},before:function(t){this.requests[a]&&this.requests[a].abort(),this.requests[a]=t}}).then(function(o){e.requests[a]=null,e.queryCache[t]={vars:o.body.head.vars,rows:o.body.results.bindings},n(e.queryCache[t])},function(t){n({vars:[],rows:[]})})},getFieldLabel:function(t,n){return n["_"+t+"Label"]?n["_"+t+"Label"].value:n[t].value.replace(/^.*[\/#]([^\/#]+)$/,"$1")}}}},516:function(t,n,e){"use strict";e.r(n);var a=e(517),o=e.n(a);for(var r in a)"default"!==r&&function(t){e.d(n,t,function(){return a[t]})}(r);n.default=o.a},517:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,o=e(500),r=(a=o)&&a.__esModule?a:{default:a};n.default={mixins:[r.default],props:["query","countQuery","resource","searchFields"],data:function(){return{}},watch:{queryTemplate:function(t){t&&this.fetchRows()}},mounted:function(){this.sortFields=this.searchFields||"uri",this.sortField=this.sortFields.split(/[,\s]/).shift(),this.fetchQueryTemplate(),this.fetchCountQueryTemplate()},methods:{fetchQueryTemplate:function(){var t=this;this.$http.get(this.query).then(function(n){t.queryTemplate=n.body})},fetchCountQueryTemplate:function(){var t=this;this.$http.get(this.countQuery).then(function(n){t.countQueryTemplate=n.body})},sort:function(t){t.name===this.sortField?this.sortDirection="ASC"===this.sortDirection?"DESC":"ASC":(this.sortField=t.name,this.sortDirection="ASC")}}}},518:function(t,n,e){var a=e(651);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,e(131).default)("0b389dc9",a,!1,{})},650:function(t,n,e){"use strict";var a=e(518);e.n(a).a},651:function(t,n,e){(t.exports=e(130)(!1)).push([t.i,'.ld-data-table {\n  transition: opacity 0.5s;\n}\n.ld-data-table .ld-card {\n    min-height: 400px;\n}\n.ld-data-table.loading td, .ld-data-table.loading .controls {\n    opacity: 0.8;\n}\n.ld-data-table .rows {\n    min-height: 300px;\n}\n.ld-data-table .rows table {\n      width: 100%;\n      max-width: 100%;\n      font-size: 16px;\n      background-color: #fff;\n      border-collapse: collapse;\n      border-spacing: 0;\n      margin: 0;\n      position: relative;\n      overflow: auto;\n}\n.ld-data-table .rows table thead {\n        vertical-align: middle;\n}\n.ld-data-table .rows table thead th {\n          vertical-align: bottom;\n          margin: 0;\n          text-align: left;\n          padding: 0 16px;\n          font-family: "Lato Light", "Lucida Sans Unicode", "Lucida Grande", sans-serif;\n          color: #666;\n          font-size: 16px;\n          line-height: 40px;\n          border-bottom: 2px solid #4da692;\n          cursor: pointer;\n}\n.ld-data-table .rows table thead th .sort-arrow {\n            font-size: 18px;\n}\n.ld-data-table .rows table thead th .sort-arrow.desc {\n              transform: rotate(-180deg);\n}\n.ld-data-table .rows table thead th.row-index {\n            text-align: right;\n}\n.ld-data-table .rows table tbody td {\n        text-align: left;\n        padding: 8px 16px;\n        border-bottom: 1px solid #f5f5f5;\n        background-color: #fff;\n        line-height: 20px;\n        vertical-align: top;\n        color: #5e5e5e;\n}\n.ld-data-table .rows table tbody td.row-index {\n          text-align: right;\n}\n.ld-data-table .rows table tbody tr:nth-child(even) td {\n        background-color: #f9f9f9;\n}\n.ld-data-table .controls {\n    padding: 16px 16px 0;\n}\n.ld-data-table .controls input {\n      width: 100%;\n      padding: 8px 10px;\n      font-size: 14px;\n      line-height: 18px;\n      border: 1px solid #cbd2da;\n      vertical-align: top;\n      margin-bottom: 5px;\n}\n.ld-data-table .controls input:focus {\n        border: 1px solid #42796d;\n}\n.ld-data-table .controls .pagination {\n      text-align: right;\n}\n.ld-data-table .controls .pagination .info {\n        vertical-align: middle;\n        display: inline-block;\n        line-height: 36px;\n        font-size: 16px;\n        padding: 0 16px;\n}\n.ld-data-table .controls button {\n      display: inline-block;\n      text-align: center;\n      vertical-align: middle;\n      cursor: pointer;\n      height: 36px;\n      width: 36px;\n      background-color: #4da692;\n      border: none;\n}\n.ld-data-table .controls button.disabled {\n        cursor: default;\n        background-color: #f5f5f5;\n}\n.ld-data-table .controls button.disabled:hover, .ld-data-table .controls button.disabled:focus, .ld-data-table .controls button.disabled::-moz-focus-inner {\n          cursor: default;\n          background-color: #f5f5f5;\n}\n.ld-data-table .controls button:hover, .ld-data-table .controls button:focus, .ld-data-table .controls button::-moz-focus-inner {\n        background-color: #42796d;\n        outline: 0;\n        border: 0;\n}\n.ld-data-table .controls button .v-icon {\n        height: 36px;\n        width: 36px;\n        color: #fff;\n        vertical-align: middle;\n}\n',""])},672:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"ld-data-table",class:{loading:t.loading}},[e("ld-card",[e("div",{staticClass:"loader",class:{loading:t.loading}}),t._v(" "),e("div",{staticClass:"rows"},[e("table",[e("thead",[e("tr",[e("th",{staticClass:"row-index"},[t._v("#")]),t._v(" "),t._l(t.fields,function(n){return n.name.match(/^_/)?t._e():e("th",{on:{click:function(e){return t.sort(n)}}},[t._v("\n                            "+t._s(n.label)+"\n                            "),t.sortField===n.name?e("v-icon",{staticClass:"sort-arrow",class:{desc:"DESC"===t.sortDirection}},[t._v("arrow_upward")]):t._e()],1)})],2)]),t._v(" "),e("tbody",[t.loading||0!==t.rowCount?t._e():e("tr",[e("td",{attrs:{colspan:"100"}},[t._v("0 treffers")])]),t._v(" "),t._l(t.rows,function(n,a){return e("tr",[e("td",{staticClass:"row-index"},[t._v(t._s(a+t.loadedOffset+1))]),t._v(" "),t._l(t.fields,function(a){return a.name.match(/^_/)?t._e():e("td",[n[a.name]?"uri"===n[a.name].type?e("a",{attrs:{href:n[a.name].value}},[t._v("\n                                "+t._s(t.getFieldLabel(a.name,n))+"\n                            ")]):e("span",[t._v(t._s(n[a.name].value))]):e("span",[t._v("-")])])})],2)})],2)])]),t._v(" "),e("div",{staticClass:"controls"},[e("flex-container",[e("flex-item",{staticClass:"search",attrs:{dsk:"50",tab:"100"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Filteren ..."},domProps:{value:t.search},on:{input:function(n){n.target.composing||(t.search=n.target.value)}}})]),t._v(" "),e("flex-item",{staticClass:"pagination",attrs:{dsk:"50",tab:"100"}},[e("span",{staticClass:"info"},[t.pageCount?e("span",{staticClass:"page-info"},[t._v("\n                            Pagina "+t._s(t.page)+"/"+t._s(t.pageCount)+"\n                        ")]):t._e(),t._v(" "),null!==t.rowCount?e("span",{staticClass:"row-count"},[t._v("\n                            ("+t._s(t.rowCount.toLocaleString())+" treffer"+t._s(1!==t.rowCount?"s":"")+")\n                        ")]):t._e()]),t._v(" "),null!==t.prevOffset?e("button",{class:{disabled:t.offset===t.prevOffset},attrs:{title:t.prevOffset},on:{click:function(n){t.offset=t.prevOffset}}},[e("v-icon",[t._v("chevron_left")])],1):t._e(),t._v(" "),null!==t.nextOffset?e("button",{class:{disabled:t.offset===t.nextOffset},attrs:{title:t.nextOffset},on:{click:function(n){t.offset=t.nextOffset}}},[e("v-icon",[t._v("chevron_right")])],1):t._e()])],1)],1)])],1)},o=[];a._withStripped=!0,e.d(n,"a",function(){return a}),e.d(n,"b",function(){return o})}}]);